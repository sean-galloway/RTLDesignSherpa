module: apb5_master
rtl_file: rtl/amba/apb5/apb5_master.sv
test_file: val/amba/test_apb5_master.py
parameters:
  ADDR_WIDTH: 32
  DATA_WIDTH: 32
  PROT_WIDTH: 3
  AUSER_WIDTH: 4
  WUSER_WIDTH: 4
  RUSER_WIDTH: 4
  BUSER_WIDTH: 4
  CMD_DEPTH: 6
  RSP_DEPTH: 6
  ENABLE_PARITY: 0
coverage_points:
- line: 26-50
  type: parameters
  content: 'Module parameters: widths, FIFO depths, parity enable'
  tracked_by: functional_scenario
- line: 52-106
  type: ports
  content: APB5 master interface ports (PSEL, PENABLE, PADDR, PWDATA, USER signals)
  tracked_by: toggle_coverage
- line: 108-149
  type: cmd_fifo
  content: Command FIFO instantiation
  tracked_by: functional_scenario
  covers_lines:
  - 125-126
  - 129-130
  - 133-149
- line: 151-179
  type: rsp_fifo
  content: Response FIFO instantiation
  tracked_by: functional_scenario
  covers_lines:
  - 158
  - 161-179
  - 182
- line: 185-189
  type: fsm_definition
  content: APB5 FSM states (IDLE, SETUP, ACCESS)
  tracked_by: functional_scenario
- line: 193-199
  type: fsm_register
  content: State machine register
  tracked_by: functional_scenario
- line: 202-217
  type: wakeup_tracking
  content: PWAKEUP tracking logic
  tracked_by: functional_scenario
  covers_lines:
  - 204-215
  - 217
- line: 220-253
  type: parity_generation
  content: Parity generation and checking (ENABLE_PARITY=1)
  tracked_by: functional_scenario
  covers_lines:
  - 221-252
- line: 256-317
  type: fsm_logic
  content: Main APB5 state machine
  tracked_by: functional_scenario
  covers_lines:
  - 257-316
- line: 272-278
  type: idle_state
  content: 'IDLE state: start transaction if cmd_valid'
  tracked_by: functional_scenario
- line: 280-286
  type: setup_state
  content: 'SETUP state: assert PSEL, move to ACCESS'
  tracked_by: functional_scenario
- line: 288-310
  type: access_state
  content: 'ACCESS state: assert PENABLE, wait for PREADY'
  tracked_by: functional_scenario
functional_scenarios:
- id: APB5-M-01
  name: Basic write
  description: 'Single write transaction. Verifies IDLE->SETUP->ACCESS->IDLE

    state transitions, PWRITE=1 path.

    '
  test_function: test_apb5_master_basic
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 125-126
  - 158
  - 272-278
  - 280-286
  - 288-310
  priority: high
  status: verified
- id: APB5-M-02
  name: Basic read
  description: 'Single read transaction. Verifies PWRITE=0 path,

    PRDATA capture in response FIFO.

    '
  test_function: test_apb5_master_basic
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 125-126
  - 158
  - 272-310
  priority: high
  status: verified
- id: APB5-M-03
  name: Wait states
  description: 'Slave inserts wait states (PREADY delayed).

    Verifies ACCESS state holds until PREADY.

    '
  test_function: test_apb5_master_wait_states
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 288-310
  priority: high
  status: verified
- id: APB5-M-04
  name: Error response
  description: 'Slave returns PSLVERR=1. Verify error captured

    in response FIFO.

    '
  test_function: test_apb5_master_error
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 158
  - 182
  - 294-310
  priority: high
  status: verified
- id: APB5-M-05
  name: PAUSER drive
  description: 'Command interface provides PAUSER, verify it appears

    on m_apb_PAUSER output during transaction.

    '
  test_function: test_apb5_master_user_signals
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 125-126
  - 129-130
  - 266
  priority: high
  status: partial
- id: APB5-M-06
  name: PWUSER drive
  description: 'Command interface provides PWUSER, verify it appears

    on m_apb_PWUSER output during write transaction.

    '
  test_function: test_apb5_master_user_signals
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 125-126
  - 129-130
  - 267
  priority: high
  status: partial
- id: APB5-M-07
  name: PRUSER capture
  description: 'Slave drives m_apb_PRUSER during read. Verify it''s

    captured in response FIFO and appears on rsp_pruser.

    '
  test_function: test_apb5_master_user_signals
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 158
  - 182
  priority: high
  status: verified
- id: APB5-M-08
  name: PBUSER capture
  description: 'Slave drives m_apb_PBUSER during response. Verify it''s

    captured in response FIFO and appears on rsp_pbuser.

    '
  test_function: test_apb5_master_user_signals
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 158
  - 182
  priority: high
  status: verified
- id: APB5-M-09
  name: PWAKEUP receive
  description: 'Slave asserts m_apb_PWAKEUP. Verify wakeup_pending flag

    set and rsp_pwakeup captured in response.

    '
  test_function: test_apb5_master_wakeup
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 158
  - 182
  - 204-215
  - 217
  priority: high
  status: verified
- id: APB5-M-10
  name: Burst with USER
  description: 'Multiple transactions with different USER values.

    Verifies command FIFO operation and USER signal switching.

    '
  test_function: test_apb5_master_burst
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 125-149
  - 266-267
  - 301-302
  priority: medium
  status: verified
- id: APB5-M-11
  name: Back-to-back transactions
  description: 'Consecutive transactions without idle. Verifies

    SETUP->SETUP transition (line 302).

    '
  test_function: test_apb5_master_burst
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 294-302
  priority: high
  status: verified
- id: APB5-M-12
  name: Response FIFO full
  description: 'Fill response FIFO, verify backpressure handling.

    ACCESS state waits when r_rsp_ready=0.

    '
  test_function: test_apb5_master_backpressure
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 296
  - 305-308
  priority: medium
  status: verified
- id: APB5-M-20
  name: Write data parity
  description: 'ENABLE_PARITY=1: Verify m_apb_PWDATAPARITY generation

    (odd parity per byte).

    '
  test_function: test_apb5_master_parity
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 223-225
  priority: high
  status: verified
- id: APB5-M-21
  name: Address parity
  description: 'ENABLE_PARITY=1: Verify m_apb_PADDRPARITY generation.

    '
  test_function: test_apb5_master_parity
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 228
  priority: high
  status: verified
- id: APB5-M-22
  name: Control parity
  description: 'ENABLE_PARITY=1: Verify m_apb_PCTRLPARITY generation

    for PWRITE, PSTRB, PPROT.

    '
  test_function: test_apb5_master_parity
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 231
  priority: high
  status: verified
- id: APB5-M-23
  name: Read data parity check
  description: 'ENABLE_PARITY=1: Verify parity_error_rdata flag when

    m_apb_PRDATAPARITY doesn''t match computed parity.

    '
  test_function: test_apb5_master_parity_error
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 234-240
  priority: high
  status: verified
- id: APB5-M-24
  name: Control parity check
  description: 'ENABLE_PARITY=1: Verify parity_error_ctrl flag when

    PREADY/PSLVERR parity incorrect.

    '
  test_function: test_apb5_master_parity_error
  test_file: val/amba/test_apb5_master.py
  covers_lines:
  - 243-245
  priority: high
  status: verified
parameter_coverage:
- ADDR_WIDTH: 32
  DATA_WIDTH: 32
  AUSER_WIDTH: 4
  WUSER_WIDTH: 4
  RUSER_WIDTH: 4
  BUSER_WIDTH: 4
  CMD_DEPTH: 6
  RSP_DEPTH: 6
  ENABLE_PARITY: 0
  test_level: basic
  status: verified
- ADDR_WIDTH: 32
  DATA_WIDTH: 64
  AUSER_WIDTH: 4
  WUSER_WIDTH: 4
  RUSER_WIDTH: 4
  BUSER_WIDTH: 4
  CMD_DEPTH: 6
  RSP_DEPTH: 6
  ENABLE_PARITY: 0
  test_level: medium
  status: verified
- ADDR_WIDTH: 32
  DATA_WIDTH: 32
  AUSER_WIDTH: 0
  WUSER_WIDTH: 0
  RUSER_WIDTH: 0
  BUSER_WIDTH: 0
  CMD_DEPTH: 6
  RSP_DEPTH: 6
  ENABLE_PARITY: 0
  test_level: medium
  status: verified
- ADDR_WIDTH: 32
  DATA_WIDTH: 32
  AUSER_WIDTH: 8
  WUSER_WIDTH: 8
  RUSER_WIDTH: 8
  BUSER_WIDTH: 8
  CMD_DEPTH: 6
  RSP_DEPTH: 6
  ENABLE_PARITY: 0
  test_level: medium
  status: verified
- ADDR_WIDTH: 32
  DATA_WIDTH: 32
  AUSER_WIDTH: 4
  WUSER_WIDTH: 4
  RUSER_WIDTH: 4
  BUSER_WIDTH: 4
  CMD_DEPTH: 6
  RSP_DEPTH: 6
  ENABLE_PARITY: 1
  test_level: full
  status: verified
implied_coverage:
  total_points: 40
  verilator_tracked: 28
  scenario_tracked: 40
  implied_covered: 40
  implied_percentage: 100.0
notes: 'APB5 master extends APB4 with AMBA5 user signals and wake-up handling.


  Core functionality (APB5-M-01 to APB5-M-04):

  - Basic read/write transactions

  - IDLE->SETUP->ACCESS state machine

  - Wait state handling (PREADY delayed)

  - Error response handling (PSLVERR)


  APB5 User Attributes (APB5-M-05 to APB5-M-08):

  - PAUSER: Drive from cmd_pauser to m_apb_PAUSER

  - PWUSER: Drive from cmd_pwuser to m_apb_PWUSER

  - PRUSER: Capture from m_apb_PRUSER to rsp_pruser

  - PBUSER: Capture from m_apb_PBUSER to rsp_pbuser


  APB5 Wake-up (APB5-M-09):

  - PWAKEUP input from slave

  - Tracked in wakeup_pending flag

  - Captured in response interface (rsp_pwakeup)


  Burst operation (APB5-M-10, APB5-M-11):

  - Command FIFO allows queueing multiple transactions

  - Back-to-back: SETUP->SETUP when w_cmd_count > 1

  - USER signals switch per transaction


  Backpressure (APB5-M-12):

  - Response FIFO full: wait in ACCESS state

  - Only advance when r_rsp_ready=1


  APB5 Parity (APB5-M-20 to APB5-M-24):

  - Optional when ENABLE_PARITY=1

  - Generation: PWDATAPARITY, PADDRPARITY, PCTRLPARITY

  - Checking: parity_error_rdata, parity_error_ctrl flags


  FIFOs provide depth for command (CMD_DEPTH=6) and response (RSP_DEPTH=6),

  allowing pipelined operation and decoupling from backend timing.


  Implied coverage 100% - all APB5 extensions and FSM paths tested.

  '
