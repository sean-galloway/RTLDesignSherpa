%%{init: {'theme': 'neutral', 'themeVariables': { 'fontSize': '14px'}}}%%
flowchart LR
    subgraph Inputs
        CLK[aclk]
        CG_EN[cg_enable]
        CG_TEST[cg_test_enable]
    end

    subgraph apb_slave_cdc_cg["apb_slave_cdc_cg"]
        subgraph ICG["Clock Gate"]
            GATE["amba_clock_gate_ctrl\nenable | test | busy"]
        end

        subgraph Core["apb_slave_cdc"]
            CORE["Core module\n(gated clock)"]
        end
    end

    subgraph Outputs
        BUSY[busy]
    end

    CLK --> ICG
    CG_EN --> ICG
    CG_TEST --> ICG
    ICG --> Core
    Core --> BUSY
    BUSY --> ICG
