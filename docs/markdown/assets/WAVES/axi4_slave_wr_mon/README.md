# AXI4 Slave Write Monitor Waveforms

**Status:** ✅ Working - 2 waveforms generated

This directory contains WaveDrom timing diagrams for the `axi4_slave_wr_mon` module, demonstrating write transactions from the slave perspective.

## Generated Waveforms

### 1. single_beat_write_001.json
**First single-beat write transaction**
- Address: 0x1000
- Data: 0xDEADBEEF
- Shows complete AW → W → B → MonBus flow from slave side
- Monitor packet generated after transaction completes

### 2. single_beat_write_002_001.json
**Second single-beat write transaction**
- Address: 0x2000
- Data: 0xCAFEBABE
- Demonstrates second transaction with different address/data
- Shows consistent slave-side monitoring behavior

## Signal Groups

### Clock & Reset
- `aclk` - System clock
- `aresetn` - Active-low reset

### AW Channel (Write Address) - Slave Perspective
- `s_axi_awvalid` - Address valid (from master)
- `s_axi_awready` - Address ready (from slave)
- `s_axi_awid` - Transaction ID
- `s_axi_awaddr` - Write address
- `s_axi_awlen` - Burst length

### W Channel (Write Data) - Slave Perspective
- `s_axi_wvalid` - Data valid (from master)
- `s_axi_wready` - Data ready (from slave)
- `s_axi_wdata` - Write data
- `s_axi_wlast` - Last beat indicator
- `s_axi_wstrb` - Byte strobe

### B Channel (Write Response) - Slave Perspective
- `s_axi_bvalid` - Response valid (from slave)
- `s_axi_bready` - Response ready (from master)
- `s_axi_bid` - Transaction ID
- `s_axi_bresp` - Response status

### Monitor Bus
- `monbus_valid` - Monitor packet valid
- `monbus_ready` - Monitor packet ready

## Transaction Flow (Slave Perspective)

1. **AW Reception:** Master drives awvalid with address, slave accepts with awready
2. **W Reception:** Master drives wvalid with data, wlast=1 for single-beat
3. **Memory Write:** Slave writes data to memory model
4. **B Response:** Slave drives bvalid with response (OKAY)
5. **MonBus Packet:** Monitor generates packet on monbus after transaction completes

## Slave vs Master Perspective

**Key Difference**: Slave monitor shows the `s_axi_*` signals (slave interface), while master monitor shows `m_axi_*` signals (master interface).

- **Master Monitor**: Monitors what the master is sending/receiving
- **Slave Monitor**: Monitors what the slave is receiving/sending

Both generate the same monitor bus packet format for system-level observability.

## Implementation Notes

- **Test File:** `val/amba/test_axi4_slave_wr_mon.py::axi4_slave_wr_mon_wavedrom_test`
- **Signal Bindings:** All s_axi_* signals manually bound (slave AXI interface)
- **Constraints:** Uses SignalTransition on s_axi_awvalid (0→1) to trigger capture
- **Capture Window:** 80 cycles with 20 post-match cycles to capture monbus packet
- **Pattern:** Each constraint captures complete write transaction from slave perspective

## Generating Waveforms

Run the wavedrom test:

```bash
env ENABLE_WAVEDROM=1 pytest "val/amba/test_axi4_slave_wr_mon.py::test_axi4_slave_wr_mon" -v
```

Copy generated files to docs:

```bash
cp val/amba/local_sim_build/test_axi4_slave_wr_mon_full/single_beat_write*.json \
   docs/markdown/assets/WAVES/axi4_slave_wr_mon/
```

## Key Lessons from Implementation

1. **Slave API Difference:** Used `single_write_response_test()` instead of `single_write_test()`
2. **Signal Naming:** s_axi_* for slave monitors (vs m_axi_* for master monitors)
3. **Simple Constraints:** Single-event constraints (s_axi_awvalid 0→1) capture full write transaction
4. **Three Channel Flow:** AW → W → B sequence clearly visible in slave waveforms

## Related Documentation

- [AXI4 Master Write Monitor Waveforms](../axi4_master_wr_mon/) - Master perspective
- [AXI4 Slave Read Monitor Waveforms](../axi4_slave_rd_mon/) - Slave read examples
- [RTL Source](../../../../../rtl/amba/axi4/axi4_slave_wr_mon.sv) - Monitor RTL implementation
- [Test Source](../../../../../val/amba/test_axi4_slave_wr_mon.py) - Complete test with wavedrom

---

**Last Updated:** 2025-10-11
**Generated By:** WaveDrom constraint-based generation from RTL simulation
