# AXI4 Master Write Monitor Waveforms

**Status:** ✅ Working - 2 waveforms generated

This directory contains WaveDrom timing diagrams for the `axi4_master_wr_mon` module, demonstrating write transactions through the monitor.

## Generated Waveforms

### 1. single_beat_write_001.json
**First single-beat write transaction**
- Address: 0x1000
- Data: 0xDEADBEEF
- Shows complete AW → W → B → MonBus flow
- Monitor packet generated after transaction completes

### 2. single_beat_write_002_001.json
**Second single-beat write transaction**
- Address: 0x2000
- Data: 0xCAFEBABE
- Demonstrates second transaction with different address/data
- Shows consistent monitoring behavior

## Signal Groups

### Clock & Reset
- `aclk` - System clock
- `aresetn` - Active-low reset

### AW Channel (Write Address)
- `m_axi_awvalid` - Address valid
- `m_axi_awready` - Address ready
- `m_axi_awid` - Transaction ID
- `m_axi_awaddr` - Write address
- `m_axi_awlen` - Burst length

### W Channel (Write Data)
- `m_axi_wvalid` - Data valid
- `m_axi_wready` - Data ready
- `m_axi_wdata` - Write data
- `m_axi_wlast` - Last beat indicator
- `m_axi_wstrb` - Byte strobe

### B Channel (Write Response)
- `m_axi_bvalid` - Response valid
- `m_axi_bready` - Response ready
- `m_axi_bid` - Transaction ID
- `m_axi_bresp` - Response status

### Monitor Bus
- `monbus_valid` - Monitor packet valid
- `monbus_ready` - Monitor packet ready

## Transaction Flow

1. **AW Handshake:** Master drives awvalid with address, monitor accepts with awready
2. **W Transfer:** Master drives wvalid with data, wlast=1 for single-beat
3. **B Response:** Monitor returns bvalid with response (OKAY)
4. **MonBus Packet:** Monitor generates packet on monbus after transaction completes

## Implementation Notes

- **Test File:** `val/amba/test_axi4_master_wr_mon.py::axi4_master_wr_mon_wavedrom_test`
- **Signal Bindings:** All m_axi_* signals manually bound (actual AXI interface)
- **Constraints:** Uses SignalTransition on m_axi_awvalid (0→1) to trigger capture
- **Capture Window:** 80 cycles with 20 post-match cycles to capture monbus packet
- **Pattern:** Each constraint captures complete transaction including monbus output

## Generating Waveforms

Run the wavedrom test:

```bash
env ENABLE_WAVEDROM=1 pytest "val/amba/test_axi4_master_wr_mon.py::test_axi4_master_wr_mon" -v
```

Copy generated files to docs:

```bash
cp val/amba/local_sim_build/test_axi4_master_wr_mon_full/single_beat_write*.json \
   docs/markdown/assets/WAVES/axi4_master_wr_mon/
```

## Key Lessons from Implementation

1. **Manual Signal Binding:** Used manual `add_signal_binding()` for all write channels rather than protocol-based auto-binding
2. **Parameter Naming:** `single_write_test(address=..., data=...)` uses `address` not `addr`
3. **Simple Constraints:** Single-event constraints (awvalid 0→1) are sufficient to capture full write transaction
4. **Monitor vs Interface:** Show actual AXI interface (m_axi_*) being monitored, not internal fub_axi_*

## Related Documentation

- [AXI4 Master Read Monitor Waveforms](../axi4_master_rd_mon/) - Read transaction examples
- [RTL Source](../../../../../rtl/amba/axi4/axi4_master_wr_mon.sv) - Monitor RTL implementation
- [Test Source](../../../../../val/amba/test_axi4_master_wr_mon.py) - Complete test with wavedrom

---

**Last Updated:** 2025-10-11
**Generated By:** WaveDrom constraint-based generation from RTL simulation
