%%{init: {'theme': 'neutral', 'themeVariables': { 'fontSize': '14px'}}}%%
flowchart LR
    subgraph Inputs
        CLK[clk]
        RST[rst_n]
        EN[enable]
    end

    subgraph counter["counter"]
        subgraph Control["Control Logic"]
            CTRL["Enable gating\nDirection control"]
        end

        subgraph Count["Count Register"]
            REG["r_count[WIDTH-1:0]"]
        end

        subgraph Wrap["Wrap Detection"]
            WRAP["MAX/MIN compare\nWrap signal generation"]
        end
    end

    subgraph Outputs
        CNT["count[WIDTH-1:0]"]
        OVF[overflow]
    end

    CLK --> Count
    RST --> Count
    EN --> Control
    Control --> Count
    Count --> Wrap
    Count --> CNT
    Wrap --> OVF
