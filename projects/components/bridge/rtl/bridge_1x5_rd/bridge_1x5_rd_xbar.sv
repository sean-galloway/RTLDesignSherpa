// Crossbar: bridge_1x5_rd_xbar
// Generated by: CrossbarGenerator
// 
// Routes width-adapted signals from adapters to slaves.
// Selects correct width path based on address decode.

`timescale 1ns / 1ps

import bridge_1x5_rd_pkg::*;

module bridge_1x5_rd_xbar (
    input  logic aclk,
    input  logic aresetn,

    // cpu_rd adapter outputs (multiple width paths)
    input  logic [NUM_SLAVES-1:0] cpu_rd_slave_select_ar,
    // 32b path
    input  axi4_ar_t     cpu_rd_32b_ar,
    input  logic         cpu_rd_32b_arvalid,
    output logic         cpu_rd_32b_arready,
    output axi4_r_32b_t  cpu_rd_32b_r,
    output logic         cpu_rd_32b_rvalid,
    input  logic         cpu_rd_32b_rready,
    // 64b path
    input  axi4_ar_t     cpu_rd_64b_ar,
    input  logic         cpu_rd_64b_arvalid,
    output logic         cpu_rd_64b_arready,
    output axi4_r_64b_t  cpu_rd_64b_r,
    output logic         cpu_rd_64b_rvalid,
    input  logic         cpu_rd_64b_rready,
    // 128b path
    input  axi4_ar_t     cpu_rd_128b_ar,
    input  logic         cpu_rd_128b_arvalid,
    output logic         cpu_rd_128b_arready,
    output axi4_r_128b_t  cpu_rd_128b_r,
    output logic         cpu_rd_128b_rvalid,
    input  logic         cpu_rd_128b_rready,

    // Slave 0: periph_rd
    output  logic [3:0]  periph_rd_axi_arid,
    output  logic [31:0]  periph_rd_axi_araddr,
    output  logic [7:0]  periph_rd_axi_arlen,
    output  logic [2:0]  periph_rd_axi_arsize,
    output  logic [1:0]  periph_rd_axi_arburst,
    output  logic         periph_rd_axi_arlock,
    output  logic [3:0]  periph_rd_axi_arcache,
    output  logic [2:0]  periph_rd_axi_arprot,
    output  logic [3:0]  periph_rd_axi_arqos,
    output  logic [3:0]  periph_rd_axi_arregion,
    output  logic         periph_rd_axi_aruser,
    output  logic         periph_rd_axi_arvalid,
    input  logic         periph_rd_axi_arready,

    input  logic [3:0]  periph_rd_axi_rid,
    input  logic [31:0]  periph_rd_axi_rdata,
    input  logic [1:0]  periph_rd_axi_rresp,
    input  logic         periph_rd_axi_rlast,
    input  logic         periph_rd_axi_ruser,
    input  logic         periph_rd_axi_rvalid,
    output  logic         periph_rd_axi_rready,

    // Slave 1: ddr_rd
    output  logic [3:0]  ddr_rd_axi_arid,
    output  logic [31:0]  ddr_rd_axi_araddr,
    output  logic [7:0]  ddr_rd_axi_arlen,
    output  logic [2:0]  ddr_rd_axi_arsize,
    output  logic [1:0]  ddr_rd_axi_arburst,
    output  logic         ddr_rd_axi_arlock,
    output  logic [3:0]  ddr_rd_axi_arcache,
    output  logic [2:0]  ddr_rd_axi_arprot,
    output  logic [3:0]  ddr_rd_axi_arqos,
    output  logic [3:0]  ddr_rd_axi_arregion,
    output  logic         ddr_rd_axi_aruser,
    output  logic         ddr_rd_axi_arvalid,
    input  logic         ddr_rd_axi_arready,

    input  logic [3:0]  ddr_rd_axi_rid,
    input  logic [63:0]  ddr_rd_axi_rdata,
    input  logic [1:0]  ddr_rd_axi_rresp,
    input  logic         ddr_rd_axi_rlast,
    input  logic         ddr_rd_axi_ruser,
    input  logic         ddr_rd_axi_rvalid,
    output  logic         ddr_rd_axi_rready,

    // Slave 2: hbm_rd
    output  logic [3:0]  hbm_rd_axi_arid,
    output  logic [31:0]  hbm_rd_axi_araddr,
    output  logic [7:0]  hbm_rd_axi_arlen,
    output  logic [2:0]  hbm_rd_axi_arsize,
    output  logic [1:0]  hbm_rd_axi_arburst,
    output  logic         hbm_rd_axi_arlock,
    output  logic [3:0]  hbm_rd_axi_arcache,
    output  logic [2:0]  hbm_rd_axi_arprot,
    output  logic [3:0]  hbm_rd_axi_arqos,
    output  logic [3:0]  hbm_rd_axi_arregion,
    output  logic         hbm_rd_axi_aruser,
    output  logic         hbm_rd_axi_arvalid,
    input  logic         hbm_rd_axi_arready,

    input  logic [3:0]  hbm_rd_axi_rid,
    input  logic [127:0]  hbm_rd_axi_rdata,
    input  logic [1:0]  hbm_rd_axi_rresp,
    input  logic         hbm_rd_axi_rlast,
    input  logic         hbm_rd_axi_ruser,
    input  logic         hbm_rd_axi_rvalid,
    output  logic         hbm_rd_axi_rready,

    // Slave 3: apb_periph
    output  logic [3:0]  apb_periph_axi_arid,
    output  logic [31:0]  apb_periph_axi_araddr,
    output  logic [7:0]  apb_periph_axi_arlen,
    output  logic [2:0]  apb_periph_axi_arsize,
    output  logic [1:0]  apb_periph_axi_arburst,
    output  logic         apb_periph_axi_arlock,
    output  logic [3:0]  apb_periph_axi_arcache,
    output  logic [2:0]  apb_periph_axi_arprot,
    output  logic [3:0]  apb_periph_axi_arqos,
    output  logic [3:0]  apb_periph_axi_arregion,
    output  logic         apb_periph_axi_aruser,
    output  logic         apb_periph_axi_arvalid,
    input  logic         apb_periph_axi_arready,

    input  logic [3:0]  apb_periph_axi_rid,
    input  logic [31:0]  apb_periph_axi_rdata,
    input  logic [1:0]  apb_periph_axi_rresp,
    input  logic         apb_periph_axi_rlast,
    input  logic         apb_periph_axi_ruser,
    input  logic         apb_periph_axi_rvalid,
    output  logic         apb_periph_axi_rready,

    // Slave 4: axil_periph
    output  logic [3:0]  axil_periph_axi_arid,
    output  logic [31:0]  axil_periph_axi_araddr,
    output  logic [7:0]  axil_periph_axi_arlen,
    output  logic [2:0]  axil_periph_axi_arsize,
    output  logic [1:0]  axil_periph_axi_arburst,
    output  logic         axil_periph_axi_arlock,
    output  logic [3:0]  axil_periph_axi_arcache,
    output  logic [2:0]  axil_periph_axi_arprot,
    output  logic [3:0]  axil_periph_axi_arqos,
    output  logic [3:0]  axil_periph_axi_arregion,
    output  logic         axil_periph_axi_aruser,
    output  logic         axil_periph_axi_arvalid,
    input  logic         axil_periph_axi_arready,

    input  logic [3:0]  axil_periph_axi_rid,
    input  logic [31:0]  axil_periph_axi_rdata,
    input  logic [1:0]  axil_periph_axi_rresp,
    input  logic         axil_periph_axi_rlast,
    input  logic         axil_periph_axi_ruser,
    input  logic         axil_periph_axi_rvalid,
    output  logic         axil_periph_axi_rready
);

    // ================================================================
    // Crossbar Routing
    // ================================================================
    localparam NUM_SLAVES = 5;

    // ================================================================
    // Slave 0: periph_rd (32b)
    // ================================================================
    // Single master: cpu_rd → periph_rd
    // Master width: 64b, Slave width: 32b
    // Using 32b path from adapter

    // AR channel
    assign periph_rd_axi_arid     = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.id : '0;
    assign periph_rd_axi_araddr   = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.addr : '0;
    assign periph_rd_axi_arlen    = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.len : '0;
    assign periph_rd_axi_arsize   = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.size : '0;
    assign periph_rd_axi_arburst  = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.burst : '0;
    assign periph_rd_axi_arlock   = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.lock : '0;
    assign periph_rd_axi_arcache  = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.cache : '0;
    assign periph_rd_axi_arprot   = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_ar.prot : '0;
    assign periph_rd_axi_arvalid  = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_arvalid : '0;

    // Rready (master → slave)
    assign periph_rd_axi_rready = cpu_rd_slave_select_ar[0] ? cpu_rd_32b_rready : '0;


    // ================================================================
    // Slave 1: ddr_rd (64b)
    // ================================================================
    // Single master: cpu_rd → ddr_rd
    // Master width: 64b, Slave width: 64b
    // Using 64b path from adapter

    // AR channel
    assign ddr_rd_axi_arid     = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.id : '0;
    assign ddr_rd_axi_araddr   = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.addr : '0;
    assign ddr_rd_axi_arlen    = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.len : '0;
    assign ddr_rd_axi_arsize   = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.size : '0;
    assign ddr_rd_axi_arburst  = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.burst : '0;
    assign ddr_rd_axi_arlock   = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.lock : '0;
    assign ddr_rd_axi_arcache  = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.cache : '0;
    assign ddr_rd_axi_arprot   = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_ar.prot : '0;
    assign ddr_rd_axi_arvalid  = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_arvalid : '0;

    // Rready (master → slave)
    assign ddr_rd_axi_rready = cpu_rd_slave_select_ar[1] ? cpu_rd_64b_rready : '0;


    // ================================================================
    // Slave 2: hbm_rd (128b)
    // ================================================================
    // Single master: cpu_rd → hbm_rd
    // Master width: 64b, Slave width: 128b
    // Using 128b path from adapter

    // AR channel
    assign hbm_rd_axi_arid     = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.id : '0;
    assign hbm_rd_axi_araddr   = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.addr : '0;
    assign hbm_rd_axi_arlen    = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.len : '0;
    assign hbm_rd_axi_arsize   = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.size : '0;
    assign hbm_rd_axi_arburst  = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.burst : '0;
    assign hbm_rd_axi_arlock   = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.lock : '0;
    assign hbm_rd_axi_arcache  = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.cache : '0;
    assign hbm_rd_axi_arprot   = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_ar.prot : '0;
    assign hbm_rd_axi_arvalid  = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_arvalid : '0;

    // Rready (master → slave)
    assign hbm_rd_axi_rready = cpu_rd_slave_select_ar[2] ? cpu_rd_128b_rready : '0;


    // ================================================================
    // Slave 3: apb_periph (32b)
    // ================================================================
    // Single master: cpu_rd → apb_periph
    // Master width: 64b, Slave width: 32b
    // Using 64b path from adapter (APB LCD width)

    // AR channel
    assign apb_periph_axi_arid     = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.id : '0;
    assign apb_periph_axi_araddr   = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.addr : '0;
    assign apb_periph_axi_arlen    = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.len : '0;
    assign apb_periph_axi_arsize   = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.size : '0;
    assign apb_periph_axi_arburst  = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.burst : '0;
    assign apb_periph_axi_arlock   = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.lock : '0;
    assign apb_periph_axi_arcache  = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.cache : '0;
    assign apb_periph_axi_arprot   = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_ar.prot : '0;
    assign apb_periph_axi_arvalid  = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_arvalid : '0;

    // Rready (master → slave)
    assign apb_periph_axi_rready = cpu_rd_slave_select_ar[3] ? cpu_rd_64b_rready : '0;


    // ================================================================
    // Slave 4: axil_periph (32b)
    // ================================================================
    // Single master: cpu_rd → axil_periph
    // Master width: 64b, Slave width: 32b
    // Using 32b path from adapter

    // AR channel
    assign axil_periph_axi_arid     = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.id : '0;
    assign axil_periph_axi_araddr   = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.addr : '0;
    assign axil_periph_axi_arlen    = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.len : '0;
    assign axil_periph_axi_arsize   = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.size : '0;
    assign axil_periph_axi_arburst  = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.burst : '0;
    assign axil_periph_axi_arlock   = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.lock : '0;
    assign axil_periph_axi_arcache  = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.cache : '0;
    assign axil_periph_axi_arprot   = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_ar.prot : '0;
    assign axil_periph_axi_arvalid  = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_arvalid : '0;

    // Rready (master → slave)
    assign axil_periph_axi_rready = cpu_rd_slave_select_ar[4] ? cpu_rd_32b_rready : '0;


    // ================================================================
    // Response MUXes (OR together all slave responses)
    // ================================================================

    // Master: cpu_rd, Width path: 32b
    assign cpu_rd_32b_arready = 
        (cpu_rd_slave_select_ar[0] ? periph_rd_axi_arready : '0) |
        (cpu_rd_slave_select_ar[3] ? apb_periph_axi_arready : '0) |
        (cpu_rd_slave_select_ar[4] ? axil_periph_axi_arready : '0);

    assign cpu_rd_32b_r.id = 
        (cpu_rd_slave_select_ar[0] ? periph_rd_axi_rid : '0) |
        (cpu_rd_slave_select_ar[3] ? apb_periph_axi_rid : '0) |
        (cpu_rd_slave_select_ar[4] ? axil_periph_axi_rid : '0);

    assign cpu_rd_32b_r.data = 
        (cpu_rd_slave_select_ar[0] ? periph_rd_axi_rdata : 32'b0) |
        (cpu_rd_slave_select_ar[3] ? apb_periph_axi_rdata : 32'b0) |
        (cpu_rd_slave_select_ar[4] ? axil_periph_axi_rdata : 32'b0);

    assign cpu_rd_32b_r.resp = 
        (cpu_rd_slave_select_ar[0] ? periph_rd_axi_rresp : '0) |
        (cpu_rd_slave_select_ar[3] ? apb_periph_axi_rresp : '0) |
        (cpu_rd_slave_select_ar[4] ? axil_periph_axi_rresp : '0);

    assign cpu_rd_32b_r.last = 
        (cpu_rd_slave_select_ar[0] ? periph_rd_axi_rlast : '0) |
        (cpu_rd_slave_select_ar[3] ? apb_periph_axi_rlast : '0) |
        (cpu_rd_slave_select_ar[4] ? axil_periph_axi_rlast : '0);

    assign cpu_rd_32b_rvalid = 
        (cpu_rd_slave_select_ar[0] ? periph_rd_axi_rvalid : '0) |
        (cpu_rd_slave_select_ar[3] ? apb_periph_axi_rvalid : '0) |
        (cpu_rd_slave_select_ar[4] ? axil_periph_axi_rvalid : '0);


    // Master: cpu_rd, Width path: 64b
    assign cpu_rd_64b_arready = 
        (cpu_rd_slave_select_ar[1] ? ddr_rd_axi_arready : '0);

    assign cpu_rd_64b_r.id = 
        (cpu_rd_slave_select_ar[1] ? ddr_rd_axi_rid : '0);

    assign cpu_rd_64b_r.data = 
        (cpu_rd_slave_select_ar[1] ? ddr_rd_axi_rdata : 64'b0);

    assign cpu_rd_64b_r.resp = 
        (cpu_rd_slave_select_ar[1] ? ddr_rd_axi_rresp : '0);

    assign cpu_rd_64b_r.last = 
        (cpu_rd_slave_select_ar[1] ? ddr_rd_axi_rlast : '0);

    assign cpu_rd_64b_rvalid = 
        (cpu_rd_slave_select_ar[1] ? ddr_rd_axi_rvalid : '0);


    // Master: cpu_rd, Width path: 128b
    assign cpu_rd_128b_arready = 
        (cpu_rd_slave_select_ar[2] ? hbm_rd_axi_arready : '0);

    assign cpu_rd_128b_r.id = 
        (cpu_rd_slave_select_ar[2] ? hbm_rd_axi_rid : '0);

    assign cpu_rd_128b_r.data = 
        (cpu_rd_slave_select_ar[2] ? hbm_rd_axi_rdata : 128'b0);

    assign cpu_rd_128b_r.resp = 
        (cpu_rd_slave_select_ar[2] ? hbm_rd_axi_rresp : '0);

    assign cpu_rd_128b_r.last = 
        (cpu_rd_slave_select_ar[2] ? hbm_rd_axi_rlast : '0);

    assign cpu_rd_128b_rvalid = 
        (cpu_rd_slave_select_ar[2] ? hbm_rd_axi_rvalid : '0);


endmodule : bridge_1x5_rd_xbar
