<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="804px" preserveAspectRatio="none" style="width:1193px;height:804px;" version="1.1" viewBox="0 0 1193 804" width="1193px" zoomAndPan="magnify"><defs><filter height="300%" id="f2y88s4tcwph1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="372" x="413.5" y="19.2419">AR Channel Arbiter FSM (Per-Slave Instance)</text><ellipse cx="393" cy="57.5158" fill="#000000" filter="url(#f2y88s4tcwph1)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M564,223.5158 L564,313.0158 L528.65,317.0158 L564,321.0158 L564,410.576 A0,0 0 0 0 564,410.576 L838,410.576 A0,0 0 0 0 838,410.576 L838,233.5158 L828,223.5158 L564,223.5158 A0,0 0 0 0 564,223.5158 " fill="#FBFB77" filter="url(#f2y88s4tcwph1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M828,223.5158 L828,233.5158 L838,233.5158 L828,223.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="570" y="242.4129">Round-Robin Arbitration:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="570" y="260.1189">Priority rotates after each grant:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="570" y="277.8249">- Start search from (ar_last_grant[s] + 1)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="570" y="295.5309">- Find first requesting master</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="570" y="313.2369">- Update ar_last_grant[s] = winning master</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="573" y="330.9429"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="570" y="348.649">Fairness Guarantee:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="570" y="366.355">- No master starvation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="570" y="384.061">- All masters get equal opportunity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="570" y="401.767">- Same algorithm as AW arbiter</text><path d="M568,605.5158 L568,686.0158 L533.05,690.0158 L568,694.0158 L568,774.87 A0,0 0 0 0 568,774.87 L864,774.87 A0,0 0 0 0 864,774.87 L864,615.5158 L854,605.5158 L568,605.5158 A0,0 0 0 0 568,605.5158 " fill="#FBFB77" filter="url(#f2y88s4tcwph1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M854,605.5158 L854,615.5158 L864,615.5158 L854,605.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="574" y="624.4129">Grant Locking:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="574" y="642.1189">- Grant held until AR handshake completes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="574" y="659.8249">- R channel follows AR grant (read data locked)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="574" y="677.5309">- R channel uses ID table for response routing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="577" y="695.2369"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="574" y="712.9429">Independent from AW Arbitration:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="574" y="730.649">- Read requests processed independently</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="574" y="748.355">- No dependency on write path status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="574" y="766.061">- Enables read/write parallelism</text><path d="M6,587.5158 L6,792.282 A0,0 0 0 0 6,792.282 L218,792.282 A0,0 0 0 0 218,792.282 L218,694.0158 L252.68,690.0158 L218,686.0158 L218,597.5158 L208,587.5158 L6,587.5158 A0,0 0 0 0 6,587.5158 " fill="#FBFB77" filter="url(#f2y88s4tcwph1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M208,587.5158 L208,597.5158 L218,597.5158 L208,587.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="12" y="606.4129">Address Phase Handshake:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="15" y="624.1189"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="12" y="641.8249">AR transaction completes when:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="18" y="659.5309">ARVALID = 1 (from master)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="18" y="677.2369">ARREADY = 1 (from slave)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="18" y="694.9429">Rising edge of clock</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="15" y="712.649"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="12" y="730.355">After handshake:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="12" y="748.061">- Grant released</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="12" y="765.767">- Arbiter returns to IDLE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="12" y="783.473">- Ready for next read request</text><rect fill="#FEFECE" filter="url(#f2y88s4tcwph1)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="968.5" y="32.5158"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="968.5" x2="1085.5" y1="61.5838" y2="61.5838"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="978.5" y="52.4818">ar_arbiter_fsm</text><path d="M873,161.5158 L873,472.5181 A0,0 0 0 0 873,472.5181 L1181,472.5181 A0,0 0 0 0 1181,472.5181 L1181,171.5158 L1171,161.5158 L1031,161.5158 L1027,82.7358 L1023,161.5158 L873,161.5158 A0,0 0 0 0 873,161.5158 " fill="#FBFB77" filter="url(#f2y88s4tcwph1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1171,161.5158 L1171,171.5158 L1181,171.5158 L1171,161.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="879" y="180.4129">Key Differences from AW Arbiter:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="882" y="198.1189"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="879" y="215.8249">Similarities:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="879" y="233.5309">- Same 2-state structure (IDLE ↔ GRANT_ACTIVE)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="879" y="251.2369">- Same round-robin algorithm</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="879" y="268.9429">- Same grant locking mechanism</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="882" y="286.649"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="879" y="304.355">Differences:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="879" y="322.061">- Operates on AR channel (read address)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="879" y="339.767">- Independent FSM instance per slave</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="879" y="357.473">- R channel data path follows AR grant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="879" y="375.179">- No interaction with write path</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="882" y="392.8851"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="879" y="410.5911">Total FSM Count:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="879" y="428.2971">- AW arbiters: NUM_SLAVES instances</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="879" y="446.0031">- AR arbiters: NUM_SLAVES instances</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="879" y="463.7091">- Total: 2 × NUM_SLAVES FSMs</text><rect fill="#FEFECE" filter="url(#f2y88s4tcwph1)" height="104.4444" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="271" x="257.5" y="265.0158"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="257.5" x2="528.5" y1="294.0838" y2="294.0838"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="378" y="284.9818">IDLE</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="157" x="262.5" y="311.9119">Entry: ar_grant_matrix[s] = 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="262.5" y="328.256">Entry: ar_grant_active[s] = 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="157" x="262.5" y="344.6001">Wait for master AR requests</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="251" x="262.5" y="360.9442">Round-robin priority tracking: ar_last_grant[s]</text><rect fill="#FEFECE" filter="url(#f2y88s4tcwph1)" height="120.7885" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="280" x="253" y="629.5158"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="253" x2="533" y1="658.5838" y2="658.5838"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="343" y="649.4818">GRANT_ACTIVE</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="209" x="258" y="676.4119">Entry: Grant issued to winning master</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="258" y="692.756">Entry: ar_grant_matrix[s][m] = 1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="258" y="709.1001">Entry: ar_grant_active[s] = 1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="223" x="258" y="725.4442">Grant locked until handshake completes</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="260" x="258" y="741.7883">ARVALID &amp;&amp; ARREADY → transaction complete</text><!--MD5=[9c5673dd9f569fe24504060ab78be963]
link *start to IDLE--><path d="M393,67.6758 C393,97.9158 393,196.2058 393,259.6858 " fill="none" id="*start-&gt;IDLE" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="393,264.9558,397,255.9558,393,259.9558,389,255.9558,393,264.9558" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="394" y="127.4129">Reset / Power-On</text><!--MD5=[75264694667a78871ed7a8d5a2e66d87]
link IDLE to GRANT_ACTIVE--><path d="M347.66,369.0258 C310.76,416.9458 268.24,491.0258 291,557.5158 C299.34,581.8658 314.22,605.1858 330.08,625.2458 " fill="none" id="IDLE-&gt;GRANT_ACTIVE" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="333.26,629.2158,330.7485,619.6926,330.1313,625.3157,324.5082,624.6985,333.26,629.2158" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="292" y="517.4129">|ar_request_matrix[s]| &gt; 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="299" y="535.1189">Round-robin arbitration</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="312.5" y="552.8249">Selects next master</text><!--MD5=[2707df2912cc3de3b510316c3458e837]
link GRANT_ACTIVE to IDLE--><path d="M427.31,629.4158 C438.08,607.5358 448.58,582.0958 454,557.5158 C467.97,494.1958 444.19,422.1758 422.36,373.7858 " fill="none" id="GRANT_ACTIVE-&gt;IDLE" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="420.25,369.1758,420.37,379.024,422.3362,373.7198,427.6404,375.686,420.25,369.1758" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="477" y="517.4129">m_axi_arvalid[s] &amp;&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="485.5" y="535.1189">m_axi_arready[s]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="460" y="552.8249">(AR handshake complete)</text><!--MD5=[e036f75575ce29d987e15154e73ac9ee]
@startuml ar_arbiter_fsm

title AR Channel Arbiter FSM (Per-Slave Instance)

[*] - -> IDLE : Reset / Power-On

state IDLE {
  IDLE : Entry: ar_grant_matrix[s] = 0
  IDLE : Entry: ar_grant_active[s] = 0
  IDLE : Wait for master AR requests
  IDLE : Round-robin priority tracking: ar_last_grant[s]
}

state GRANT_ACTIVE {
  GRANT_ACTIVE : Entry: Grant issued to winning master
  GRANT_ACTIVE : Entry: ar_grant_matrix[s][m] = 1
  GRANT_ACTIVE : Entry: ar_grant_active[s] = 1
  GRANT_ACTIVE : Grant locked until handshake completes
  GRANT_ACTIVE : ARVALID && ARREADY → transaction complete
}

IDLE - -> GRANT_ACTIVE : |ar_request_matrix[s]| > 0\nRound-robin arbitration\nSelects next master
GRANT_ACTIVE - -> IDLE : m_axi_arvalid[s] &&\nm_axi_arready[s]\n(AR handshake complete)

note right of IDLE
  **Round-Robin Arbitration:**
  Priority rotates after each grant:
  - Start search from (ar_last_grant[s] + 1)
  - Find first requesting master
  - Update ar_last_grant[s] = winning master

  **Fairness Guarantee:**
  - No master starvation
  - All masters get equal opportunity
  - Same algorithm as AW arbiter
end note

note right of GRANT_ACTIVE
  **Grant Locking:**
  - Grant held until AR handshake completes
  - R channel follows AR grant (read data locked)
  - R channel uses ID table for response routing

  **Independent from AW Arbitration:**
  - Read requests processed independently
  - No dependency on write path status
  - Enables read/write parallelism
end note

note left of GRANT_ACTIVE
  **Address Phase Handshake:**

  AR transaction completes when:
    ARVALID = 1 (from master)
    ARREADY = 1 (from slave)
    Rising edge of clock

  After handshake:
  - Grant released
  - Arbiter returns to IDLE
  - Ready for next read request
end note

note bottom of ar_arbiter_fsm
  **Key Differences from AW Arbiter:**

  **Similarities:**
  - Same 2-state structure (IDLE ↔ GRANT_ACTIVE)
  - Same round-robin algorithm
  - Same grant locking mechanism

  **Differences:**
  - Operates on AR channel (read address)
  - Independent FSM instance per slave
  - R channel data path follows AR grant
  - No interaction with write path

  **Total FSM Count:**
  - AW arbiters: NUM_SLAVES instances
  - AR arbiters: NUM_SLAVES instances
  - Total: 2 × NUM_SLAVES FSMs
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 02:22:07 PST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>