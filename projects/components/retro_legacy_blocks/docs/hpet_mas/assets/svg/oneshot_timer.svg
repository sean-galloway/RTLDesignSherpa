<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: oneshot_timer Pages: 1 -->
<svg width="527pt" height="961pt"
 viewBox="0.00 0.00 527.00 961.48" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 957.48)">
<title>oneshot_timer</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-957.48 523,-957.48 523,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="lightgreen" stroke="black" cx="257" cy="-926.61" rx="86.03" ry="26.74"/>
<text text-anchor="middle" x="257" y="-930.41" font-family="Arial" font-size="14.00">Timer Configured</text>
<text text-anchor="middle" x="257" y="-915.41" font-family="Arial" font-size="14.00">(One&#45;Shot Mode)</text>
</g>
<!-- timer_enabled -->
<g id="node3" class="node">
<title>timer_enabled</title>
<path fill="lightblue" stroke="black" d="M339,-862.74C339,-862.74 175,-862.74 175,-862.74 169,-862.74 163,-856.74 163,-850.74 163,-850.74 163,-821.74 163,-821.74 163,-815.74 169,-809.74 175,-809.74 175,-809.74 339,-809.74 339,-809.74 345,-809.74 351,-815.74 351,-821.74 351,-821.74 351,-850.74 351,-850.74 351,-856.74 345,-862.74 339,-862.74"/>
<text text-anchor="middle" x="257" y="-847.54" font-family="Arial" font-size="14.00">Timer Enabled</text>
<text text-anchor="middle" x="257" y="-832.54" font-family="Arial" font-size="14.00">TIMER_CONFIG.enable = 1</text>
<text text-anchor="middle" x="257" y="-817.54" font-family="Arial" font-size="14.00">TIMER_CONFIG.type = 0</text>
</g>
<!-- start&#45;&gt;timer_enabled -->
<g id="edge1" class="edge">
<title>start&#45;&gt;timer_enabled</title>
<path fill="none" stroke="black" d="M257,-899.57C257,-891.23 257,-881.84 257,-872.93"/>
<polygon fill="black" stroke="black" points="260.5,-872.79 257,-862.79 253.5,-872.79 260.5,-872.79"/>
</g>
<!-- end -->
<g id="node2" class="node">
<title>end</title>
<ellipse fill="orange" stroke="black" cx="161" cy="-26.87" rx="93.18" ry="26.74"/>
<text text-anchor="middle" x="161" y="-30.67" font-family="Arial" font-size="14.00">Timer Idle</text>
<text text-anchor="middle" x="161" y="-15.67" font-family="Arial" font-size="14.00">(Must Reconfigure)</text>
</g>
<!-- counter_running -->
<g id="node4" class="node">
<title>counter_running</title>
<path fill="lightcyan" stroke="black" d="M332.5,-772.74C332.5,-772.74 181.5,-772.74 181.5,-772.74 175.5,-772.74 169.5,-766.74 169.5,-760.74 169.5,-760.74 169.5,-746.74 169.5,-746.74 169.5,-740.74 175.5,-734.74 181.5,-734.74 181.5,-734.74 332.5,-734.74 332.5,-734.74 338.5,-734.74 344.5,-740.74 344.5,-746.74 344.5,-746.74 344.5,-760.74 344.5,-760.74 344.5,-766.74 338.5,-772.74 332.5,-772.74"/>
<text text-anchor="middle" x="257" y="-757.54" font-family="Arial" font-size="14.00">Main Counter Running</text>
<text text-anchor="middle" x="257" y="-742.54" font-family="Arial" font-size="14.00">Increments every hpet_clk</text>
</g>
<!-- timer_enabled&#45;&gt;counter_running -->
<g id="edge2" class="edge">
<title>timer_enabled&#45;&gt;counter_running</title>
<path fill="none" stroke="black" d="M257,-809.33C257,-801.05 257,-791.85 257,-783.39"/>
<polygon fill="black" stroke="black" points="260.5,-783.21 257,-773.21 253.5,-783.21 260.5,-783.21"/>
</g>
<!-- compare -->
<g id="node5" class="node">
<title>compare</title>
<path fill="lightyellow" stroke="black" d="M150.32,-695C150.32,-695 11.68,-662.48 11.68,-662.48 5.84,-661.11 5.84,-658.37 11.68,-657 11.68,-657 150.32,-624.48 150.32,-624.48 156.16,-623.11 167.84,-623.11 173.68,-624.48 173.68,-624.48 312.32,-657 312.32,-657 318.16,-658.37 318.16,-661.11 312.32,-662.48 312.32,-662.48 173.68,-695 173.68,-695 167.84,-696.37 156.16,-696.37 150.32,-695"/>
<text text-anchor="middle" x="162" y="-663.54" font-family="Arial" font-size="14.00">Compare:</text>
<text text-anchor="middle" x="162" y="-648.54" font-family="Arial" font-size="14.00">counter &gt;= comparator?</text>
</g>
<!-- counter_running&#45;&gt;compare -->
<g id="edge3" class="edge">
<title>counter_running&#45;&gt;compare</title>
<path fill="none" stroke="black" d="M238.23,-734.56C227.47,-724.15 213.57,-710.68 200.58,-698.1"/>
<polygon fill="black" stroke="black" points="202.69,-695.27 193.07,-690.83 197.82,-700.3 202.69,-695.27"/>
</g>
<!-- wait_cycle -->
<g id="node6" class="node">
<title>wait_cycle</title>
<path fill="white" stroke="black" d="M365,-554.74C365,-554.74 297,-554.74 297,-554.74 291,-554.74 285,-548.74 285,-542.74 285,-542.74 285,-530.74 285,-530.74 285,-524.74 291,-518.74 297,-518.74 297,-518.74 365,-518.74 365,-518.74 371,-518.74 377,-524.74 377,-530.74 377,-530.74 377,-542.74 377,-542.74 377,-548.74 371,-554.74 365,-554.74"/>
<text text-anchor="middle" x="331" y="-533.04" font-family="Arial" font-size="14.00">Wait 1 Cycle</text>
</g>
<!-- compare&#45;&gt;wait_cycle -->
<g id="edge4" class="edge">
<title>compare&#45;&gt;wait_cycle</title>
<path fill="none" stroke="black" d="M201.2,-630.68C230.89,-609.42 271.17,-580.57 298.95,-560.69"/>
<polygon fill="black" stroke="black" points="301.05,-563.49 307.14,-554.82 296.98,-557.8 301.05,-563.49"/>
<text text-anchor="middle" x="265" y="-592.54" font-family="Arial" font-size="14.00">No</text>
</g>
<!-- fire_detect -->
<g id="node7" class="node">
<title>fire_detect</title>
<path fill="lightcoral" stroke="black" d="M234,-570.74C234,-570.74 90,-570.74 90,-570.74 84,-570.74 78,-564.74 78,-558.74 78,-558.74 78,-514.74 78,-514.74 78,-508.74 84,-502.74 90,-502.74 90,-502.74 234,-502.74 234,-502.74 240,-502.74 246,-508.74 246,-514.74 246,-514.74 246,-558.74 246,-558.74 246,-564.74 240,-570.74 234,-570.74"/>
<text text-anchor="middle" x="162" y="-555.54" font-family="Arial" font-size="14.00">Timer Fires!</text>
<text text-anchor="middle" x="162" y="-540.54" font-family="Arial" font-size="14.00">• IRQ asserts</text>
<text text-anchor="middle" x="162" y="-525.54" font-family="Arial" font-size="14.00">• Edge detection (0→1)</text>
<text text-anchor="middle" x="162" y="-510.54" font-family="Arial" font-size="14.00">• Comparator unchanged</text>
</g>
<!-- compare&#45;&gt;fire_detect -->
<g id="edge5" class="edge">
<title>compare&#45;&gt;fire_detect</title>
<path fill="none" stroke="black" d="M162,-621.45C162,-608.74 162,-594.41 162,-581.26"/>
<polygon fill="black" stroke="black" points="165.5,-581.01 162,-571.01 158.5,-581.01 165.5,-581.01"/>
<text text-anchor="middle" x="173.5" y="-592.54" font-family="Arial" font-size="14.00">Yes</text>
</g>
<!-- wait_cycle&#45;&gt;counter_running -->
<g id="edge6" class="edge">
<title>wait_cycle&#45;&gt;counter_running</title>
<path fill="none" stroke="black" d="M336.12,-554.79C344.28,-585.37 357.01,-650.73 333,-697.74 326.56,-710.35 315.74,-720.73 304.24,-728.95"/>
<polygon fill="black" stroke="black" points="302.2,-726.11 295.81,-734.55 306.08,-731.94 302.2,-726.11"/>
</g>
<!-- irq_check -->
<g id="node8" class="node">
<title>irq_check</title>
<path fill="lightyellow" stroke="black" d="M151.39,-460.14C151.39,-460.14 100.61,-433.34 100.61,-433.34 95.31,-430.54 95.31,-424.94 100.61,-422.14 100.61,-422.14 151.39,-395.34 151.39,-395.34 156.69,-392.54 167.31,-392.54 172.61,-395.34 172.61,-395.34 223.39,-422.14 223.39,-422.14 228.69,-424.94 228.69,-430.54 223.39,-433.34 223.39,-433.34 172.61,-460.14 172.61,-460.14 167.31,-462.94 156.69,-462.94 151.39,-460.14"/>
<text text-anchor="middle" x="162" y="-431.54" font-family="Arial" font-size="14.00">Interrupt</text>
<text text-anchor="middle" x="162" y="-416.54" font-family="Arial" font-size="14.00">enabled?</text>
</g>
<!-- fire_detect&#45;&gt;irq_check -->
<g id="edge7" class="edge">
<title>fire_detect&#45;&gt;irq_check</title>
<path fill="none" stroke="black" d="M162,-502.47C162,-494.18 162,-485.13 162,-476.3"/>
<polygon fill="black" stroke="black" points="165.5,-476.09 162,-466.09 158.5,-476.09 165.5,-476.09"/>
</g>
<!-- irq_assert -->
<g id="node9" class="node">
<title>irq_assert</title>
<path fill="red" stroke="black" d="M168,-338.74C168,-338.74 46,-338.74 46,-338.74 40,-338.74 34,-332.74 34,-326.74 34,-326.74 34,-297.74 34,-297.74 34,-291.74 40,-285.74 46,-285.74 46,-285.74 168,-285.74 168,-285.74 174,-285.74 180,-291.74 180,-297.74 180,-297.74 180,-326.74 180,-326.74 180,-332.74 174,-338.74 168,-338.74"/>
<text text-anchor="middle" x="107" y="-323.54" font-family="Arial" font-size="14.00" fill="white">Interrupt Asserted</text>
<text text-anchor="middle" x="107" y="-308.54" font-family="Arial" font-size="14.00" fill="white">timer_irq[i] = 1</text>
<text text-anchor="middle" x="107" y="-293.54" font-family="Arial" font-size="14.00" fill="white">HPET_STATUS[i] = 1</text>
</g>
<!-- irq_check&#45;&gt;irq_assert -->
<g id="edge8" class="edge">
<title>irq_check&#45;&gt;irq_assert</title>
<path fill="none" stroke="black" d="M147.69,-397.22C140.42,-382.2 131.53,-363.86 123.92,-348.15"/>
<polygon fill="black" stroke="black" points="126.88,-346.24 119.37,-338.76 120.58,-349.29 126.88,-346.24"/>
<text text-anchor="middle" x="146.5" y="-360.54" font-family="Arial" font-size="14.00">Yes</text>
</g>
<!-- timer_idle -->
<g id="node10" class="node">
<title>timer_idle</title>
<path fill="orange" stroke="black" d="M233,-248.74C233,-248.74 89,-248.74 89,-248.74 83,-248.74 77,-242.74 77,-236.74 77,-236.74 77,-192.74 77,-192.74 77,-186.74 83,-180.74 89,-180.74 89,-180.74 233,-180.74 233,-180.74 239,-180.74 245,-186.74 245,-192.74 245,-192.74 245,-236.74 245,-236.74 245,-242.74 239,-248.74 233,-248.74"/>
<text text-anchor="middle" x="161" y="-233.54" font-family="Arial" font-size="14.00">Timer Goes Idle</text>
<text text-anchor="middle" x="161" y="-218.54" font-family="Arial" font-size="14.00">• No more fires</text>
<text text-anchor="middle" x="161" y="-203.54" font-family="Arial" font-size="14.00">• IRQ stays asserted</text>
<text text-anchor="middle" x="161" y="-188.54" font-family="Arial" font-size="14.00">• Comparator unchanged</text>
</g>
<!-- irq_check&#45;&gt;timer_idle -->
<g id="edge9" class="edge">
<title>irq_check&#45;&gt;timer_idle</title>
<path fill="none" stroke="black" d="M174.61,-396.21C184.79,-367.64 196.33,-323.8 189,-285.74 187.24,-276.58 184.29,-267.1 180.95,-258.19"/>
<polygon fill="black" stroke="black" points="184.15,-256.78 177.21,-248.78 177.65,-259.36 184.15,-256.78"/>
<text text-anchor="middle" x="201" y="-308.54" font-family="Arial" font-size="14.00">No</text>
</g>
<!-- irq_assert&#45;&gt;timer_idle -->
<g id="edge10" class="edge">
<title>irq_assert&#45;&gt;timer_idle</title>
<path fill="none" stroke="black" d="M121.47,-285.65C126.3,-277.11 131.82,-267.35 137.17,-257.89"/>
<polygon fill="black" stroke="black" points="140.34,-259.39 142.22,-248.96 134.25,-255.94 140.34,-259.39"/>
</g>
<!-- sw_clear -->
<g id="node11" class="node">
<title>sw_clear</title>
<path fill="lightgreen" stroke="black" d="M249,-143.74C249,-143.74 73,-143.74 73,-143.74 67,-143.74 61,-137.74 61,-131.74 61,-131.74 61,-102.74 61,-102.74 61,-96.74 67,-90.74 73,-90.74 73,-90.74 249,-90.74 249,-90.74 255,-90.74 261,-96.74 261,-102.74 261,-102.74 261,-131.74 261,-131.74 261,-137.74 255,-143.74 249,-143.74"/>
<text text-anchor="middle" x="161" y="-128.54" font-family="Arial" font-size="14.00">Software Clears IRQ</text>
<text text-anchor="middle" x="161" y="-113.54" font-family="Arial" font-size="14.00">WRITE(HPET_STATUS, 1&lt;&lt;i)</text>
<text text-anchor="middle" x="161" y="-98.54" font-family="Arial" font-size="14.00">(Write&#45;1&#45;to&#45;Clear)</text>
</g>
<!-- timer_idle&#45;&gt;sw_clear -->
<g id="edge11" class="edge">
<title>timer_idle&#45;&gt;sw_clear</title>
<path fill="none" stroke="black" d="M161,-180.61C161,-172.03 161,-162.75 161,-154.04"/>
<polygon fill="black" stroke="black" points="164.5,-153.79 161,-143.79 157.5,-153.79 164.5,-153.79"/>
</g>
<!-- sw_clear&#45;&gt;end -->
<g id="edge12" class="edge">
<title>sw_clear&#45;&gt;end</title>
<path fill="none" stroke="black" d="M161,-90.68C161,-82.4 161,-73.05 161,-64.15"/>
<polygon fill="black" stroke="black" points="164.5,-63.99 161,-53.99 157.5,-63.99 164.5,-63.99"/>
</g>
<!-- note1 -->
<g id="node12" class="node">
<title>note1</title>
<polygon fill="lightyellow" stroke="black" points="513,-855.24 369,-855.24 369,-817.24 519,-817.24 519,-849.24 513,-855.24"/>
<polyline fill="none" stroke="black" points="513,-855.24 513,-849.24 "/>
<polyline fill="none" stroke="black" points="519,-849.24 513,-849.24 "/>
<text text-anchor="middle" x="444" y="-840.04" font-family="Arial" font-size="14.00">Note: One&#45;shot timers</text>
<text text-anchor="middle" x="444" y="-825.04" font-family="Arial" font-size="14.00">fire ONCE then stop</text>
</g>
<!-- note2 -->
<g id="node13" class="node">
<title>note2</title>
<polygon fill="lightyellow" stroke="black" points="412.5,-233.74 263.5,-233.74 263.5,-195.74 418.5,-195.74 418.5,-227.74 412.5,-233.74"/>
<polyline fill="none" stroke="black" points="412.5,-233.74 412.5,-227.74 "/>
<polyline fill="none" stroke="black" points="418.5,-227.74 412.5,-227.74 "/>
<text text-anchor="middle" x="341" y="-218.54" font-family="Arial" font-size="14.00">Note: Software must</text>
<text text-anchor="middle" x="341" y="-203.54" font-family="Arial" font-size="14.00">reconfigure for next fire</text>
</g>
</g>
</svg>
