<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: hpet_software_init Pages: 1 -->
<svg width="484pt" height="892pt"
 viewBox="0.00 0.00 484.00 891.74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 887.74)">
<title>hpet_software_init</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-887.74 480,-887.74 480,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="lightgreen" stroke="black" cx="145.5" cy="-865.74" rx="29.5" ry="18"/>
<text text-anchor="middle" x="145.5" y="-862.04" font-family="Arial" font-size="14.00">Start</text>
</g>
<!-- disable_hpet -->
<g id="node3" class="node">
<title>disable_hpet</title>
<path fill="lightblue" stroke="black" d="M232,-810.74C232,-810.74 59,-810.74 59,-810.74 53,-810.74 47,-804.74 47,-798.74 47,-798.74 47,-784.74 47,-784.74 47,-778.74 53,-772.74 59,-772.74 59,-772.74 232,-772.74 232,-772.74 238,-772.74 244,-778.74 244,-784.74 244,-784.74 244,-798.74 244,-798.74 244,-804.74 238,-810.74 232,-810.74"/>
<text text-anchor="middle" x="145.5" y="-795.54" font-family="Arial" font-size="14.00">Disable HPET</text>
<text text-anchor="middle" x="145.5" y="-780.54" font-family="Arial" font-size="14.00">WRITE(HPET_CONFIG, 0x0)</text>
</g>
<!-- start&#45;&gt;disable_hpet -->
<g id="edge1" class="edge">
<title>start&#45;&gt;disable_hpet</title>
<path fill="none" stroke="black" d="M145.5,-847.68C145.5,-839.73 145.5,-830.05 145.5,-821.05"/>
<polygon fill="black" stroke="black" points="149,-820.94 145.5,-810.94 142,-820.94 149,-820.94"/>
</g>
<!-- end -->
<g id="node2" class="node">
<title>end</title>
<ellipse fill="lightgreen" stroke="black" cx="288.5" cy="-26.87" rx="82.05" ry="26.74"/>
<text text-anchor="middle" x="288.5" y="-30.67" font-family="Arial" font-size="14.00">End</text>
<text text-anchor="middle" x="288.5" y="-15.67" font-family="Arial" font-size="14.00">(HPET Running)</text>
</g>
<!-- reset_counter -->
<g id="node4" class="node">
<title>reset_counter</title>
<path fill="lightblue" stroke="black" d="M251.5,-735.74C251.5,-735.74 39.5,-735.74 39.5,-735.74 33.5,-735.74 27.5,-729.74 27.5,-723.74 27.5,-723.74 27.5,-694.74 27.5,-694.74 27.5,-688.74 33.5,-682.74 39.5,-682.74 39.5,-682.74 251.5,-682.74 251.5,-682.74 257.5,-682.74 263.5,-688.74 263.5,-694.74 263.5,-694.74 263.5,-723.74 263.5,-723.74 263.5,-729.74 257.5,-735.74 251.5,-735.74"/>
<text text-anchor="middle" x="145.5" y="-720.54" font-family="Arial" font-size="14.00">Reset Counter to 0</text>
<text text-anchor="middle" x="145.5" y="-705.54" font-family="Arial" font-size="14.00">WRITE(HPET_COUNTER_LO, 0x0)</text>
<text text-anchor="middle" x="145.5" y="-690.54" font-family="Arial" font-size="14.00">WRITE(HPET_COUNTER_HI, 0x0)</text>
</g>
<!-- disable_hpet&#45;&gt;reset_counter -->
<g id="edge2" class="edge">
<title>disable_hpet&#45;&gt;reset_counter</title>
<path fill="none" stroke="black" d="M145.5,-772.47C145.5,-764.59 145.5,-755.08 145.5,-745.89"/>
<polygon fill="black" stroke="black" points="149,-745.76 145.5,-735.76 142,-745.76 149,-745.76"/>
</g>
<!-- check_caps -->
<g id="node5" class="node">
<title>check_caps</title>
<path fill="lightyellow" stroke="black" d="M232,-645.74C232,-645.74 59,-645.74 59,-645.74 53,-645.74 47,-639.74 47,-633.74 47,-633.74 47,-604.74 47,-604.74 47,-598.74 53,-592.74 59,-592.74 59,-592.74 232,-592.74 232,-592.74 238,-592.74 244,-598.74 244,-604.74 244,-604.74 244,-633.74 244,-633.74 244,-639.74 238,-645.74 232,-645.74"/>
<text text-anchor="middle" x="145.5" y="-630.54" font-family="Arial" font-size="14.00">Read Capabilities</text>
<text text-anchor="middle" x="145.5" y="-615.54" font-family="Arial" font-size="14.00">READ(HPET_CAPABILITIES)</text>
<text text-anchor="middle" x="145.5" y="-600.54" font-family="Arial" font-size="14.00">Get num_timers, vendor_id</text>
</g>
<!-- reset_counter&#45;&gt;check_caps -->
<g id="edge3" class="edge">
<title>reset_counter&#45;&gt;check_caps</title>
<path fill="none" stroke="black" d="M145.5,-682.31C145.5,-674.08 145.5,-664.82 145.5,-656.02"/>
<polygon fill="black" stroke="black" points="149,-655.98 145.5,-645.98 142,-655.98 149,-655.98"/>
</g>
<!-- config_timer0 -->
<g id="node6" class="node">
<title>config_timer0</title>
<path fill="lightcyan" stroke="black" d="M236.5,-555.74C236.5,-555.74 54.5,-555.74 54.5,-555.74 48.5,-555.74 42.5,-549.74 42.5,-543.74 42.5,-543.74 42.5,-499.74 42.5,-499.74 42.5,-493.74 48.5,-487.74 54.5,-487.74 54.5,-487.74 236.5,-487.74 236.5,-487.74 242.5,-487.74 248.5,-493.74 248.5,-499.74 248.5,-499.74 248.5,-543.74 248.5,-543.74 248.5,-549.74 242.5,-555.74 236.5,-555.74"/>
<text text-anchor="middle" x="145.5" y="-540.54" font-family="Arial" font-size="14.00">Configure Timer 0</text>
<text text-anchor="middle" x="145.5" y="-525.54" font-family="Arial" font-size="14.00">1. Set comparator value</text>
<text text-anchor="middle" x="145.5" y="-510.54" font-family="Arial" font-size="14.00">2. Set mode (one&#45;shot/periodic)</text>
<text text-anchor="middle" x="145.5" y="-495.54" font-family="Arial" font-size="14.00">3. Enable interrupt</text>
</g>
<!-- check_caps&#45;&gt;config_timer0 -->
<g id="edge4" class="edge">
<title>check_caps&#45;&gt;config_timer0</title>
<path fill="none" stroke="black" d="M145.5,-592.65C145.5,-584.46 145.5,-575.15 145.5,-566.06"/>
<polygon fill="black" stroke="black" points="149,-565.96 145.5,-555.96 142,-565.96 149,-565.96"/>
</g>
<!-- set_comp0 -->
<g id="node7" class="node">
<title>set_comp0</title>
<path fill="lightblue" stroke="black" d="M279,-450.74C279,-450.74 12,-450.74 12,-450.74 6,-450.74 0,-444.74 0,-438.74 0,-438.74 0,-409.74 0,-409.74 0,-403.74 6,-397.74 12,-397.74 12,-397.74 279,-397.74 279,-397.74 285,-397.74 291,-403.74 291,-409.74 291,-409.74 291,-438.74 291,-438.74 291,-444.74 285,-450.74 279,-450.74"/>
<text text-anchor="middle" x="145.5" y="-435.54" font-family="Arial" font-size="14.00">Set Comparator</text>
<text text-anchor="middle" x="145.5" y="-420.54" font-family="Arial" font-size="14.00">WRITE(TIMER0_COMPARATOR_LO, value)</text>
<text text-anchor="middle" x="145.5" y="-405.54" font-family="Arial" font-size="14.00">WRITE(TIMER0_COMPARATOR_HI, 0)</text>
</g>
<!-- config_timer0&#45;&gt;set_comp0 -->
<g id="edge5" class="edge">
<title>config_timer0&#45;&gt;set_comp0</title>
<path fill="none" stroke="black" d="M145.5,-487.61C145.5,-479.03 145.5,-469.75 145.5,-461.04"/>
<polygon fill="black" stroke="black" points="149,-460.79 145.5,-450.79 142,-460.79 149,-460.79"/>
</g>
<!-- set_config0 -->
<g id="node8" class="node">
<title>set_config0</title>
<path fill="lightblue" stroke="black" d="M239,-360.74C239,-360.74 52,-360.74 52,-360.74 46,-360.74 40,-354.74 40,-348.74 40,-348.74 40,-319.74 40,-319.74 40,-313.74 46,-307.74 52,-307.74 52,-307.74 239,-307.74 239,-307.74 245,-307.74 251,-313.74 251,-319.74 251,-319.74 251,-348.74 251,-348.74 251,-354.74 245,-360.74 239,-360.74"/>
<text text-anchor="middle" x="145.5" y="-345.54" font-family="Arial" font-size="14.00">Enable Timer 0</text>
<text text-anchor="middle" x="145.5" y="-330.54" font-family="Arial" font-size="14.00">WRITE(TIMER0_CONFIG, 0x3)</text>
<text text-anchor="middle" x="145.5" y="-315.54" font-family="Arial" font-size="14.00">(enable | int_enable)</text>
</g>
<!-- set_comp0&#45;&gt;set_config0 -->
<g id="edge6" class="edge">
<title>set_comp0&#45;&gt;set_config0</title>
<path fill="none" stroke="black" d="M145.5,-397.31C145.5,-389.08 145.5,-379.82 145.5,-371.02"/>
<polygon fill="black" stroke="black" points="149,-370.98 145.5,-360.98 142,-370.98 149,-370.98"/>
</g>
<!-- more_timers -->
<g id="node9" class="node">
<title>more_timers</title>
<path fill="lightyellow" stroke="black" d="M134.36,-266.28C134.36,-266.28 61.64,-237.2 61.64,-237.2 56.07,-234.97 56.07,-230.51 61.64,-228.28 61.64,-228.28 134.36,-199.2 134.36,-199.2 139.93,-196.97 151.07,-196.97 156.64,-199.2 156.64,-199.2 229.36,-228.28 229.36,-228.28 234.93,-230.51 234.93,-234.97 229.36,-237.2 229.36,-237.2 156.64,-266.28 156.64,-266.28 151.07,-268.51 139.93,-268.51 134.36,-266.28"/>
<text text-anchor="middle" x="145.5" y="-236.54" font-family="Arial" font-size="14.00">More timers</text>
<text text-anchor="middle" x="145.5" y="-221.54" font-family="Arial" font-size="14.00">to configure?</text>
</g>
<!-- set_config0&#45;&gt;more_timers -->
<g id="edge7" class="edge">
<title>set_config0&#45;&gt;more_timers</title>
<path fill="none" stroke="black" d="M145.5,-307.62C145.5,-299.5 145.5,-290.25 145.5,-281.11"/>
<polygon fill="black" stroke="black" points="149,-280.91 145.5,-270.91 142,-280.91 149,-280.91"/>
</g>
<!-- config_timerN -->
<g id="node10" class="node">
<title>config_timerN</title>
<path fill="lightcyan" stroke="black" d="M159.5,-143.74C159.5,-143.74 55.5,-143.74 55.5,-143.74 49.5,-143.74 43.5,-137.74 43.5,-131.74 43.5,-131.74 43.5,-102.74 43.5,-102.74 43.5,-96.74 49.5,-90.74 55.5,-90.74 55.5,-90.74 159.5,-90.74 159.5,-90.74 165.5,-90.74 171.5,-96.74 171.5,-102.74 171.5,-102.74 171.5,-131.74 171.5,-131.74 171.5,-137.74 165.5,-143.74 159.5,-143.74"/>
<text text-anchor="middle" x="107.5" y="-128.54" font-family="Arial" font-size="14.00">Configure Timer N</text>
<text text-anchor="middle" x="107.5" y="-113.54" font-family="Arial" font-size="14.00">Repeat steps for</text>
<text text-anchor="middle" x="107.5" y="-98.54" font-family="Arial" font-size="14.00">additional timers</text>
</g>
<!-- more_timers&#45;&gt;config_timerN -->
<g id="edge8" class="edge">
<title>more_timers&#45;&gt;config_timerN</title>
<path fill="none" stroke="black" d="M122.34,-203.97C116.74,-195.7 111.5,-186.29 108.5,-176.74 106.24,-169.55 105.2,-161.6 104.88,-153.95"/>
<polygon fill="black" stroke="black" points="108.37,-153.78 104.82,-143.8 101.37,-153.82 108.37,-153.78"/>
<text text-anchor="middle" x="120" y="-165.54" font-family="Arial" font-size="14.00">Yes</text>
</g>
<!-- enable_hpet -->
<g id="node11" class="node">
<title>enable_hpet</title>
<path fill="lightblue" stroke="black" d="M375,-136.24C375,-136.24 202,-136.24 202,-136.24 196,-136.24 190,-130.24 190,-124.24 190,-124.24 190,-110.24 190,-110.24 190,-104.24 196,-98.24 202,-98.24 202,-98.24 375,-98.24 375,-98.24 381,-98.24 387,-104.24 387,-110.24 387,-110.24 387,-124.24 387,-124.24 387,-130.24 381,-136.24 375,-136.24"/>
<text text-anchor="middle" x="288.5" y="-121.04" font-family="Arial" font-size="14.00">Enable HPET Globally</text>
<text text-anchor="middle" x="288.5" y="-106.04" font-family="Arial" font-size="14.00">WRITE(HPET_CONFIG, 0x1)</text>
</g>
<!-- more_timers&#45;&gt;enable_hpet -->
<g id="edge9" class="edge">
<title>more_timers&#45;&gt;enable_hpet</title>
<path fill="none" stroke="black" d="M176.53,-207.11C200.48,-188.1 233.47,-161.91 257.44,-142.89"/>
<polygon fill="black" stroke="black" points="259.85,-145.45 265.51,-136.49 255.5,-139.97 259.85,-145.45"/>
<text text-anchor="middle" x="238.5" y="-165.54" font-family="Arial" font-size="14.00">No</text>
</g>
<!-- config_timerN&#45;&gt;more_timers -->
<g id="edge10" class="edge">
<title>config_timerN&#45;&gt;more_timers</title>
<path fill="none" stroke="black" d="M123.32,-143.85C126.38,-149.58 129.31,-155.75 131.5,-161.74 134.38,-169.6 136.71,-178.19 138.59,-186.57"/>
<polygon fill="black" stroke="black" points="135.21,-187.53 140.65,-196.62 142.07,-186.12 135.21,-187.53"/>
</g>
<!-- enable_hpet&#45;&gt;end -->
<g id="edge11" class="edge">
<title>enable_hpet&#45;&gt;end</title>
<path fill="none" stroke="black" d="M288.5,-97.93C288.5,-88.18 288.5,-75.82 288.5,-64.22"/>
<polygon fill="black" stroke="black" points="292,-63.87 288.5,-53.87 285,-63.87 292,-63.87"/>
</g>
<!-- note1 -->
<g id="node12" class="node">
<title>note1</title>
<polygon fill="lightyellow" stroke="black" points="437,-810.74 262,-810.74 262,-772.74 443,-772.74 443,-804.74 437,-810.74"/>
<polyline fill="none" stroke="black" points="437,-810.74 437,-804.74 "/>
<polyline fill="none" stroke="black" points="443,-804.74 437,-804.74 "/>
<text text-anchor="middle" x="352.5" y="-795.54" font-family="Arial" font-size="14.00">Note: Always disable HPET</text>
<text text-anchor="middle" x="352.5" y="-780.54" font-family="Arial" font-size="14.00">before configuration</text>
</g>
<!-- note2 -->
<g id="node13" class="node">
<title>note2</title>
<polygon fill="lightyellow" stroke="black" points="470,-443.24 309,-443.24 309,-405.24 476,-405.24 476,-437.24 470,-443.24"/>
<polyline fill="none" stroke="black" points="470,-443.24 470,-437.24 "/>
<polyline fill="none" stroke="black" points="476,-437.24 470,-437.24 "/>
<text text-anchor="middle" x="392.5" y="-428.04" font-family="Arial" font-size="14.00">Note: Comparator values</text>
<text text-anchor="middle" x="392.5" y="-413.04" font-family="Arial" font-size="14.00">are in HPET clock cycles</text>
</g>
</g>
</svg>
