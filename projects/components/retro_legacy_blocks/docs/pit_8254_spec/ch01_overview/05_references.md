### APB PIT 8254 - References

#### Primary Specifications

**Intel 8254 Programmable Interval Timer**
- **Document**: Intel 8254 Datasheet
- **Relevance**: Original reference design for PIT functionality and control word format
- **Note**: APB PIT 8254 implements Mode 0 with APB interface adaptation

**AMBA APB Protocol Specification**
- **Document**: ARM IHI 0024C - AMBA APB Protocol Specification v2.0
- **Publisher**: ARM Limited
- **Relevance**: Defines APB4 protocol used for register access
- **URL**: https://developer.arm.com/documentation/ihi0024/latest/

**SystemRDL Specification**
- **Document**: SystemRDL 2.0 Language Reference Manual
- **Publisher**: Accellera Systems Initiative
- **Relevance**: Register description language used for PIT register definition
- **URL**: https://www.accellera.org/downloads/standards/systemrdl

#### Related RTL Design Sherpa Documentation

**APB HPET Specification**
- **Location**: `projects/components/retro_legacy_blocks/docs/hpet_spec/`
- **Relevance**: Similar APB timer peripheral, shares architectural patterns and testbench infrastructure
- **See**: HPET specification for examples of APB timer implementation

**Retro Legacy Blocks PRD**
- **Location**: `projects/components/retro_legacy_blocks/PRD.md`
- **Relevance**: Master requirements for all RLB peripherals
- **See**: Section on address map, integration strategy, and block priorities

**Retro Legacy Blocks README**
- **Location**: `projects/components/retro_legacy_blocks/README.md`
- **Relevance**: Component overview, status table, and integration examples

**Repository Root CLAUDE.md**
- **Location**: `/CLAUDE.md`
- **Relevance**: Repository-wide design standards, coding conventions, tool usage
- **See**: Sections on reset handling, FPGA synthesis, testbench architecture

**Global Requirements Document**
- **Location**: `/GLOBAL_REQUIREMENTS.md`
- **Relevance**: Mandatory requirements for all RTL and testbench code
- **See**: Reset macro standards, FPGA attributes, array syntax, SRAM standards

#### RTL Implementation Files

**Top-Level Module**
- **File**: `rtl/pit_8254/apb_pit_8254.sv`
- **Description**: APB interface wrapper with optional clock domain crossing

**Core Logic**
- **File**: `rtl/pit_8254/pit_core.sv`
- **Description**: Counter control and routing for three independent counters

**Counter Module**
- **File**: `rtl/pit_8254/pit_counter.sv`
- **Description**: Single counter implementation with Mode 0 support

**Configuration Registers**
- **File**: `rtl/pit_8254/pit_config_regs.sv`
- **Description**: Wrapper connecting PeakRDL registers to core logic

**PeakRDL Generated Files**
- **Files**:
  - `rtl/pit_8254/pit_regs.sv` - Register file RTL
  - `rtl/pit_8254/pit_regs_pkg.sv` - Package definitions
- **Source**: `rtl/pit_8254/peakrdl/pit_regs.rdl`
- **Generated by**: PeakRDL regblock tool

**Implementation Summary**
- **File**: `rtl/pit_8254/IMPLEMENTATION_SUMMARY.md`
- **Description**: Detailed implementation notes, test results, and status

#### Testbench and Verification Files

**Testbench Class**
- **File**: `dv/tbclasses/pit_8254/pit_tb.py`
- **Description**: Main testbench providing APB BFM and helper methods

**Basic Test Suite**
- **File**: `dv/tbclasses/pit_8254/pit_tests_basic.py`
- **Description**: Six basic tests covering register access, enable/disable, Mode 0, status

**Test Runner**
- **File**: `dv/tests/pit_8254/test_apb_pit_8254.py`
- **Description**: Pytest test runner invoking CocoTB tests with parameterization

**Configuration**
- **File**: `dv/tests/pit_8254/conftest.py`
- **Description**: Pytest configuration, logging setup, markers

#### Tools and Frameworks

**PeakRDL**
- **Tool**: peakrdl-regblock
- **Purpose**: Generate RTL register files from SystemRDL specifications
- **Documentation**: https://github.com/SystemRDL/PeakRDL-regblock
- **Usage**: `peakrdl regblock pit_regs.rdl --cpuif apb4 -o ../`

**CocoTB**
- **Framework**: CocoTB Python testbench framework
- **Purpose**: HDL verification using Python
- **Documentation**: https://docs.cocotb.org/
- **Usage**: Provides `@cocotb.test()` decorator and simulation infrastructure

**Verilator**
- **Tool**: Verilator HDL simulator
- **Purpose**: Fast cycle-accurate RTL simulation
- **Documentation**: https://verilator.org/
- **Usage**: Underlying simulator for CocoTB tests

**pytest**
- **Framework**: Python testing framework
- **Purpose**: Test discovery, parameterization, and reporting
- **Documentation**: https://pytest.org/
- **Usage**: `pytest dv/tests/pit_8254/ -v`

**cocotb-test**
- **Framework**: pytest integration for CocoTB
- **Purpose**: Bridge between pytest and CocoTB simulation
- **Documentation**: https://github.com/themperek/cocotb-test

#### Design Patterns and Standards

**Reset Macro Standards**
- **File**: `rtl/amba/includes/reset_defs.svh`
- **Description**: Repository-standard reset handling macros
- **Macros**: `ALWAYS_FF_RST`, `RST_ASSERTED`
- **Rationale**: FPGA-friendly reset inference, consistent reset polarity

**FPGA Synthesis Attributes**
- **Reference**: Xilinx Vivado Synthesis Guide, Intel Quartus Synthesis Handbook
- **Attributes**: `ram_style`, `use_dsp`, synthesis directives
- **Purpose**: Guide FPGA synthesis for optimal resource usage

**Testbench Architecture**
- **Pattern**: Separate TB classes from test runners
- **Location**: `dv/tbclasses/{block}/` for TB classes, `dv/tests/{block}/` for runners
- **Rationale**: Reusability, maintainability, composition

#### External Resources

**Intel 8254 Historical Context**
- **Platform**: IBM PC/AT and compatibles
- **Usage**: System timer, speaker control, PC architecture timer
- **Legacy**: Widely emulated in virtualization and retro computing

**APB Timer Implementations**
- Various vendor implementations of APB-attached timers
- ARM Cortex-M system timer examples
- Open-source APB peripheral repositories

#### Version Control and Issue Tracking

**Repository**
- **URL**: https://github.com/sean-galloway/rtldesignsherpa (if public)
- **Branch**: main
- **Component Path**: `projects/components/retro_legacy_blocks/`

**Related Issues**
- Implementation tracked via TASKS.md in component directory
- Known issues documented in IMPLEMENTATION_SUMMARY.md

#### Change History

This specification is version-controlled with the RTL implementation. See git history for detailed change tracking:

```bash
# View PIT 8254 commit history
git log --follow -- projects/components/retro_legacy_blocks/rtl/pit_8254/
git log --follow -- projects/components/retro_legacy_blocks/docs/pit_8254_spec/
```

#### Related Components

**APB HPET (High Precision Event Timer)**
- **Status**: Production ready
- **Similarity**: APB timer peripheral, similar architecture
- **Differences**: 64-bit counters, multiple modes, periodic operation

**Future RLB Components**
- **8259 PIC**: Interrupt controller
- **RTC**: Real-time clock
- **SMBus**: System management bus
- See `PRD.md` for complete roadmap

---

**Document Revision**
- **Version**: 1.0
- **Last Updated**: 2025-11-08
- **Maintained By**: RTL Design Sherpa Project
- **Documentation Support**: Claude

---

**For More Information:**
- Check `IMPLEMENTATION_SUMMARY.md` for latest implementation details
- Review `README.md` for integration examples
- Consult `PRD.md` for requirements and roadmap

