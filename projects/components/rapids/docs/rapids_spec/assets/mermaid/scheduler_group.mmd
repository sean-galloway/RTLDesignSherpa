graph TB
    APB[APB Interface<br/>apb_valid/addr] --> DESC_ENG
    RDA[RDA Packets<br/>rda_valid/packet] --> DESC_ENG
    CFG[Configuration<br/>cfg_*] --> DESC_ENG
    CFG --> SCHED

    subgraph "Scheduler Group"
        subgraph "Descriptor Engine"
            DESC_ENG[Descriptor Engine] --> |desc_ar_*| DESC_AXI[AXI AR/R<br/>512-bit]
            DESC_AXI --> |desc_r_data| DESC_PARSE[Parse Descriptor]
            DESC_PARSE --> |descriptor_packet| DESC_FIFO[4-Deep FIFO]
            DESC_ENG --> |mon_valid/packet| DESC_MON[MonBus Events<br/>Agent ID 0x10]
        end

        DESC_FIFO --> |descriptor_valid/ready| SCHED[Scheduler FSM]

        subgraph "Scheduler"
            SCHED --> |ctrlrd_valid/addr| CTRLRD_IF[CtrlRd Interface]
            SCHED --> |ctrlwr_valid/addr| CTRLWR_IF[CtrlWr Interface]
            CTRLRD_IF --> |ctrlrd_ready/error| SCHED
            CTRLWR_IF --> |ctrlwr_ready/error| SCHED
            SCHED --> |data_valid/addr/len| DATA_IF[Data Interface]
            DATA_IF --> |data_done_strobe| SCHED
            SCHED --> |alignment_info| ALIGN[Alignment Bus]
            SCHED --> |mon_valid/packet| SCHED_MON[MonBus Events<br/>Agent ID 0x30]
        end

        DESC_MON --> ARB[MonBus Arbiter<br/>Round-Robin]
        SCHED_MON --> ARB
        ARB --> |mon_valid/ready/packet| MON_OUT[MonBus Output]
    end

    CTRLRD_IF --> CTRLRD_ENG[Control Read Engine]
    CTRLWR_IF --> CTRLWR_ENG[Control Write Engine]
    DATA_IF --> DATA_ENG[Data Path Engines]
    ALIGN --> DATA_ENG
    MON_OUT --> SYS_MON[System MonBus]

    style DESC_ENG fill:#bbf,stroke:#333,stroke-width:2px
    style SCHED fill:#f9f,stroke:#333,stroke-width:3px
    style ARB fill:#bfb,stroke:#333,stroke-width:2px
    style DESC_FIFO fill:#ffb,stroke:#333,stroke-width:2px
