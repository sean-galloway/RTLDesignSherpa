# Testplan for axil4_to_axi4 (covers rd and wr variants)
# Maps functional test scenarios to Verilator coverage points

module: axil4_to_axi4
rtl_files:
  - projects/components/converters/rtl/axil4_to_axi4_rd.sv
  - projects/components/converters/rtl/axil4_to_axi4_wr.sv
test_files:
  - projects/components/converters/dv/tests/test_axil4_to_axi4_rd.py
  - projects/components/converters/dv/tests/test_axil4_to_axi4_wr.py

# Raw Verilator coverage: ~92%
# Verilator limitation: Minimal - mostly passthrough logic

# Module description:
# AXI4-Lite to AXI4 Full Protocol Converter. Separate read and write path modules.
# Converts simplified AXI4-Lite to full AXI4 by adding default values for burst fields
# and AXI4-only signals (ID, USER, REGION, QOS). All transactions remain single-beat.

parameters:
  - name: AXI_ID_WIDTH
    default: 8
    description: Transaction ID width on AXI4 side (1-16)
  - name: AXI_ADDR_WIDTH
    default: 32
    description: Address bus width (12-64)
  - name: AXI_DATA_WIDTH
    default: 32
    description: Data bus width - must match (32, 64, 128, 256)
  - name: AXI_USER_WIDTH
    default: 1
    description: User signal width on AXI4 side (0-1024)
  - name: DEFAULT_ID
    default: 0
    description: Default transaction ID (0-255)
  - name: DEFAULT_REGION
    default: 0
    description: Default region value (0-15)
  - name: DEFAULT_QOS
    default: 0
    description: Default QoS value (0-15)

# Coverage points - READ PATH (axil4_to_axi4_rd.sv)
coverage_points_read:
  - line: 67
    type: input_port
    content: "input aclk"
    covered: true

  - line: 68
    type: input_port
    content: "input aresetn"
    covered: true

  - line: 75
    type: input_port
    content: "input s_axil_araddr"
    covered: true

  - line: 76
    type: input_port
    content: "input s_axil_arprot"
    covered: true

  - line: 77
    type: input_port
    content: "input s_axil_arvalid"
    covered: true

  - line: 78
    type: output_port
    content: "output s_axil_arready"
    covered: true

  - line: 81
    type: output_port
    content: "output s_axil_rdata"
    covered: true

  - line: 82
    type: output_port
    content: "output s_axil_rresp"
    covered: true

  - line: 83
    type: output_port
    content: "output s_axil_rvalid"
    covered: true

  - line: 84
    type: input_port
    content: "input s_axil_rready"
    covered: true

  - line: 91
    type: output_port
    content: "output m_axi_arid"
    covered: true

  - line: 92
    type: output_port
    content: "output m_axi_araddr"
    covered: true

  - line: 93
    type: output_port
    content: "output m_axi_arlen"
    covered: true

  - line: 94
    type: output_port
    content: "output m_axi_arsize"
    covered: true

  - line: 102
    type: output_port
    content: "output m_axi_arvalid"
    covered: true

  - line: 103
    type: input_port
    content: "input m_axi_arready"
    covered: true

  - line: 107
    type: input_port
    content: "input m_axi_rdata"
    covered: true

  - line: 108
    type: input_port
    content: "input m_axi_rresp"
    covered: true

  - line: 111
    type: input_port
    content: "input m_axi_rvalid"
    covered: true

  - line: 112
    type: output_port
    content: "output m_axi_rready"
    covered: true

# Functional scenarios - READ PATH
functional_scenarios_read:
  - id: AXIL2AXI-RD-01
    name: "Single read passthrough"
    description: AXI-Lite read converted to AXI4 single-beat read
    test_function: "test_axil4_to_axi4_rd (basic)"
    covers_lines: [75, 77, 78, 92, 102, 107, 111, 120]
    priority: high
    status: verified

  - id: AXIL2AXI-RD-02
    name: "Default ID assignment"
    description: DEFAULT_ID parameter assigned to ARID
    test_function: "test_axil4_to_axi4_rd (basic)"
    covers_lines: [91, 126]
    priority: high
    status: verified

  - id: AXIL2AXI-RD-03
    name: "ARLEN=0 generation"
    description: ARLEN always 0 for single-beat transactions
    test_function: "test_axil4_to_axi4_rd (basic)"
    covers_lines: [93, 127]
    priority: high
    status: verified

  - id: AXIL2AXI-RD-04
    name: "ARSIZE calculation"
    description: ARSIZE calculated from data width
    test_function: "test_axil4_to_axi4_rd (medium)"
    covers_lines: [94, 128]
    priority: high
    status: verified

  - id: AXIL2AXI-RD-05
    name: "ARBURST=INCR"
    description: ARBURST always INCR (2'b01)
    test_function: "test_axil4_to_axi4_rd (basic)"
    covers_lines: [129]
    priority: medium
    status: verified

  - id: AXIL2AXI-RD-06
    name: "ARPROT passthrough"
    description: ARPROT propagated from AXIL to AXI4
    test_function: "test_axil4_to_axi4_rd (medium)"
    covers_lines: [76, 121]
    priority: medium
    status: verified

  - id: AXIL2AXI-RD-07
    name: "RDATA passthrough"
    description: Read data propagated from AXI4 to AXIL
    test_function: "test_axil4_to_axi4_rd (full)"
    covers_lines: [107, 141]
    priority: high
    status: verified

  - id: AXIL2AXI-RD-08
    name: "RRESP passthrough"
    description: Read response propagated from AXI4 to AXIL
    test_function: "test_axil4_to_axi4_rd (full)"
    covers_lines: [108, 142]
    priority: high
    status: verified

  - id: AXIL2AXI-RD-09
    name: "Default QOS/REGION"
    description: Default values assigned to QOS and REGION
    test_function: "test_axil4_to_axi4_rd (medium)"
    covers_lines: [132, 133]
    priority: low
    status: verified

# Coverage points - WRITE PATH (axil4_to_axi4_wr.sv)
coverage_points_write:
  - line: 67
    type: input_port
    content: "input aclk"
    covered: true

  - line: 68
    type: input_port
    content: "input aresetn"
    covered: true

  - line: 75
    type: input_port
    content: "input s_axil_awaddr"
    covered: true

  - line: 76
    type: input_port
    content: "input s_axil_awprot"
    covered: true

  - line: 77
    type: input_port
    content: "input s_axil_awvalid"
    covered: true

  - line: 78
    type: output_port
    content: "output s_axil_awready"
    covered: true

  - line: 81
    type: input_port
    content: "input s_axil_wdata"
    covered: true

  - line: 82
    type: input_port
    content: "input s_axil_wstrb"
    covered: true

  - line: 83
    type: input_port
    content: "input s_axil_wvalid"
    covered: true

  - line: 84
    type: output_port
    content: "output s_axil_wready"
    covered: true

  - line: 87
    type: output_port
    content: "output s_axil_bresp"
    covered: true

  - line: 88
    type: output_port
    content: "output s_axil_bvalid"
    covered: true

  - line: 89
    type: input_port
    content: "input s_axil_bready"
    covered: true

  - line: 97
    type: output_port
    content: "output m_axi_awid"
    covered: true

  - line: 98
    type: output_port
    content: "output m_axi_awaddr"
    covered: true

  - line: 99
    type: output_port
    content: "output m_axi_awlen"
    covered: true

  - line: 100
    type: output_port
    content: "output m_axi_awsize"
    covered: true

  - line: 108
    type: output_port
    content: "output m_axi_awvalid"
    covered: true

  - line: 109
    type: input_port
    content: "input m_axi_awready"
    covered: true

  - line: 112
    type: output_port
    content: "output m_axi_wdata"
    covered: true

  - line: 113
    type: output_port
    content: "output m_axi_wstrb"
    covered: true

  - line: 116
    type: output_port
    content: "output m_axi_wvalid"
    covered: true

  - line: 117
    type: input_port
    content: "input m_axi_wready"
    covered: true

  - line: 121
    type: input_port
    content: "input m_axi_bresp"
    covered: true

  - line: 122
    type: input_port
    content: "input m_axi_bvalid"
    covered: true

  - line: 123
    type: output_port
    content: "output m_axi_bready"
    covered: true

# Functional scenarios - WRITE PATH
functional_scenarios_write:
  - id: AXIL2AXI-WR-01
    name: "Single write passthrough"
    description: AXI-Lite write converted to AXI4 single-beat write
    test_function: "test_axil4_to_axi4_wr (basic)"
    covers_lines: [75, 77, 81, 83, 98, 108, 112, 116]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-02
    name: "Default ID assignment"
    description: DEFAULT_ID parameter assigned to AWID
    test_function: "test_axil4_to_axi4_wr (basic)"
    covers_lines: [97, 132]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-03
    name: "AWLEN=0 generation"
    description: AWLEN always 0 for single-beat transactions
    test_function: "test_axil4_to_axi4_wr (basic)"
    covers_lines: [99, 133]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-04
    name: "AWSIZE calculation"
    description: AWSIZE calculated from data width
    test_function: "test_axil4_to_axi4_wr (medium)"
    covers_lines: [100, 134]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-05
    name: "WSTRB passthrough"
    description: Write strobes propagated from AXIL to AXI4
    test_function: "test_axil4_to_axi4_wr (full)"
    covers_lines: [82, 113, 147]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-06
    name: "WDATA passthrough"
    description: Write data propagated from AXIL to AXI4
    test_function: "test_axil4_to_axi4_wr (full)"
    covers_lines: [81, 112, 146]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-07
    name: "WLAST=1 generation"
    description: WLAST always 1 for single-beat transactions
    test_function: "test_axil4_to_axi4_wr (medium)"
    covers_lines: [149]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-08
    name: "BRESP passthrough"
    description: Write response propagated from AXI4 to AXIL
    test_function: "test_axil4_to_axi4_wr (full)"
    covers_lines: [121, 154]
    priority: high
    status: verified

  - id: AXIL2AXI-WR-09
    name: "AWPROT passthrough"
    description: AWPROT propagated from AXIL to AXI4
    test_function: "test_axil4_to_axi4_wr (medium)"
    covers_lines: [76, 127]
    priority: medium
    status: verified

# Parameter combinations tested
parameter_coverage:
  - AXI_DATA_WIDTH: 32
    DEFAULT_ID: 0
    test_level: basic
    status: verified

  - AXI_DATA_WIDTH: 64
    DEFAULT_ID: 5
    test_level: medium
    status: verified

  - AXI_ID_WIDTH: 4
    DEFAULT_QOS: 2
    test_level: full
    status: verified

# Implied coverage calculation
implied_coverage:
  total_points: 45
  verilator_tracked: 41
  scenario_tracked: 45
  implied_covered: 45
  implied_percentage: 100.0

notes: |
  AXI4-Lite to AXI4 Full Protocol Converter consists of separate read and write path modules.
  Simple passthrough design with default value assignment for AXI4-only fields.
  All transactions remain single-beat (LEN=0).

  Verilator shows ~92% - mostly passthrough logic with minimal state.

  Key features:
  - Simple passthrough for address, data, response
  - Default value assignment for ID, LEN, SIZE, BURST, LOCK, CACHE, QOS, REGION, USER
  - All transactions single-beat (ARLEN/AWLEN = 0)
  - WLAST always asserted (single beat)
  - RLAST from AXI4 side always 1 (verified but not used)

  READ PATH: 9 scenarios cover complete read conversion
  WRITE PATH: 9 scenarios cover complete write conversion
  Implied coverage is 100% - all functional paths tested.

  Data width limitations: Slave and master data widths must match.
  For data width conversion, use axi4_dwidth_converter_*.sv modules.

  This converter is the inverse of axi4_to_axil4 - see that testplan for comparison.
